<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.7.0/dist/Chart.min.js"></script>
	<!-- <script src="../../dist/chartjs-plugin-datalabels.js"></script> -->
	<!-- <script src="scripts/utils.js"></script> -->
	<style>
		.wrapper {
			background: url(labels.svg) center no-repeat;
			background-size: contain;
		}
	</style>
</head>
<body>

	<div id="charts">
		<div class="wrapper"><canvas id="chart-0" style="border-radius: 50%;"></canvas></div>
	</div>

	<script id="script-init">

		var labels = [
				'Aportación de valor',
				'Salud y bienestar',
				'Liderazgo',
				'ADN',
				'Atracción de talento',
				'Modelo de transformación',
				'Capital humano',
				'Governancia',
				'Eficiencia y agilidad'
			];

		var data = [
                51,
                30,
                85,
                100,
                15,
                82,
                12,
                41,
                27
			]

		var colors = []

		for( i=0; i<data.length; i++){
			if( data[i] > 80 ){
				colors[i] = 'rgba(132,191,136, 0.3)';
			} else if( data[i] > 40 ){
				colors[i] = '#fff1af';
			} else {
				colors[i] = '#f8aa8f';
			}
		}

		Chart.helpers.merge(Chart.defaults.global, {
			maintainAspectRatio: false,
			tooltips: false,
			// layout: {
			// 	padding: 16
			// },
			// elements: {
			// 	arc: {
		 //            borderWidth: 10
			// 	}
			// },
			plugins: {
				legend: false,
				title: false
			}
		});

		Chart.plugins.register({
		  beforeDraw: function(chartInstance) {
		    var ctx = chartInstance.chart.ctx;
      		var centerX = chartInstance.chart.width / 2;
		    var centerY = chartInstance.chart.height / 2;
		    ctx.beginPath();
    		ctx.arc(centerX, centerY, centerX, 0, Math.PI * 2, true); // Outer circle
		    ctx.fillStyle = "#fcfcfc";
			ctx.fill();
		  }
		});

	</script>

	<script id="script-construct">
		var chart = new Chart('chart-0', {
			type: 'polarArea',
			data: {
	        	//labels: labels,
	            datasets: [{
	                data: data,
	                backgroundColor: colors,
	                borderWidth: 3,
		            hoverBorderColor: 'white',
		            hoverBorderWidth: 3
	            }]
	        },
			options: {
		        scale: {
			        // angleLines:{
			        //     display: true,
			        //     color: 'white',
			        //     lineWidth: 30
			        // },
			        pointLabels: {
			        	display: true,
			        	// callback: function(pointLabel, index, labels) {
			         //        console.log(pointLabel + " " + index + " " + labels);
			            //}
			        },
			        gridLines:{
			            lineWidth: 10,
			            color: 'white'
			        },
		            ticks: {
		                display: false
		            }
		        },
				//startAngle: Math.PI * 2.466666666667,
				// plugins: {
				// 	datalabels: {
				// 		anchor: 'end',
				// 		align: 'end',
				// 		//offset: 150,
				// 		backgroundColor: function(context) {
				// 			return context.dataset.backgroundColor;
				// 		},
				// 		borderColor: 'white',
				// 		//borderRadius: 25,
				// 		borderWidth: 2,
				// 		color: 'white',
				// 		font: {
				// 			weight: 'bold'
				// 		},
				// 		formatter: function(value, context) {
    //                         return context.chart.data.labels[context.dataIndex];
    //                     }
				// 	}
				// }
		    //     animation: {
		    //         duration: 1,
		    //         onComplete: function() {
						// var chartInstance = this.chart,
						// ctx = chartInstance.ctx;

						// ctx.font = "15px Arial";
						// ctx.textAlign = 'right';
						// ctx.textBaseline = 'bottom';
						// ctx.fillStyle = "#000";

						// this.data.datasets.forEach(function(dataset, i) {
						// 	var meta = chartInstance.controller.getDatasetMeta(i);
						// 	meta.data.forEach(function(bar, index) {
						// 	var myangl=((bar._model.startAngle)+(bar._model.endAngle))/2;
						// 	var xpoint= (parseFloat(bar._model.outerRadius)+20)*(Math.cos(myangl)) + (bar._model.x);
						// 	var ypoint= (parseFloat(bar._model.outerRadius)+20)*(Math.sin(myangl)) + (bar._model.y);
						// 	ctx.fillText(bar._model.label,xpoint ,ypoint);
						// 	});
						// });
		    //         }
		    //     }
			}
		});
	</script>

	<script id="script-actions">
		function randomize() {
			chart.data.datasets.forEach(function(dataset, i) {
				dataset.backgroundColor = Samples.color();
				dataset.data = dataset.data.map(function(value) {
					return Samples.rand(0, 100);
				});
			});

			chart.update();
		}

		function addData() {
			chart.data.labels.push(chart.data.labels.length);
			chart.data.datasets.forEach(function(dataset, i) {
				dataset.data.push(Samples.rand(0, 100));
			});

			chart.update();
		}

		function removeData() {
			chart.data.labels.shift();
			chart.data.datasets.forEach(function(dataset, i) {
				dataset.data.shift();
			});

			chart.update();
		}
	</script>
</body>
</html>
